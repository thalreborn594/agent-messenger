{"version":3,"sources":["../src/cli.ts"],"sourcesContent":["#!/usr/bin/env node\nimport { Command } from 'commander';\nimport axios, { AxiosInstance } from 'axios';\nimport { getDataDir as getDefaultDataDir } from './utils';\n\nconst DEFAULT_API_PORT = 5757;\nconst DEFAULT_API_HOST = '127.0.0.1';\n\nclass DaemonClient {\n  private axiosInstance: AxiosInstance;\n\n  constructor(host = DEFAULT_API_HOST, port = DEFAULT_API_PORT) {\n    this.axiosInstance = axios.create({\n      baseURL: `http://${host}:${port}`,\n      timeout: 10000,\n    });\n  }\n\n  async get(endpoint: string, params?: Record<string, any>): Promise<any> {\n    const response = await this.axiosInstance.get(endpoint, { params });\n    return response.data;\n  }\n\n  async post(endpoint: string, data?: any): Promise<any> {\n    try {\n      const response = await this.axiosInstance.post(endpoint, data);\n      return response.data;\n    } catch (error) {\n      if (axios.isAxiosError(error) && error.response) {\n        const detail = error.response.data?.detail || 'Unknown error';\n        console.log(`‚ùå Error: ${detail}`);\n        return null;\n      }\n      throw error;\n    }\n  }\n}\n\n// Commands\nasync function cmdStatus(options: any): Promise<void> {\n  try {\n    const client = new DaemonClient(options.host, options.port);\n    const status = await client.get('/status');\n\n    console.log(`\\n${'='.repeat(50)}`);\n    console.log('Agent Messenger Status');\n    console.log(`${'='.repeat(50)}`);\n    console.log(`DID: ${status.did}`);\n    console.log(`Relay: ${status.relay}`);\n    console.log(`Connected: ${status.connected ? '‚úÖ Yes' : '‚ùå No'}`);\n    console.log(`Contacts: ${status.contacts}`);\n    console.log(`Messages: ${status.messages}`);\n    console.log(`Profile: ${status.profile}`);\n    console.log(`Data Dir: ${status.dataDir}`);\n    console.log(`${'='.repeat(50)}\\n`);\n  } catch (error) {\n    console.log('‚ùå Cannot connect to daemon');\n    console.log('   Make sure daemon is running: agentctl start-daemon --relay ws://...');\n    process.exit(1);\n  }\n}\n\nasync function cmdSend(options: any, message: string): Promise<void> {\n  try {\n    const client = new DaemonClient(options.host, options.port);\n\n    const requestData: any = { content: message };\n\n    if (options.to) {\n      requestData.to = options.to;\n    } else if (options.toName) {\n      requestData.to_name = options.toName;\n    } else {\n      console.log('‚ùå Must specify --to or --to-name');\n      process.exit(1);\n    }\n\n    const result = await client.post('/send', requestData);\n\n    if (result) {\n      if (result.status === 'ambiguous_name') {\n        console.log(`‚ö†Ô∏è  ${result.message}`);\n        for (const suggestion of result.suggestions || []) {\n          console.log(`   - ${suggestion}`);\n        }\n        process.exit(1);\n      }\n\n      const toDisplay = options.to || options.toName;\n      console.log(`‚úÖ Message sent to: ${toDisplay}`);\n    }\n  } catch (error) {\n    if (axios.isAxiosError(error) && error.code === 'ECONNREFUSED') {\n      console.log('‚ùå Cannot connect to daemon');\n    } else {\n      console.log('‚ùå Error sending message');\n    }\n    process.exit(1);\n  }\n}\n\nasync function cmdAddContact(options: any): Promise<void> {\n  try {\n    const client = new DaemonClient(options.host, options.port);\n    const result = await client.post('/add-contact', {\n      did: options.did,\n      name: options.name,\n      notes: options.notes || '',\n    });\n\n    if (result) {\n      console.log(`‚úÖ Contact added: ${options.name} (${options.did.slice(0, 32)}...)`);\n    }\n  } catch (error) {\n    if (axios.isAxiosError(error) && error.code === 'ECONNREFUSED') {\n      console.log('‚ùå Cannot connect to daemon');\n    } else {\n      console.log('‚ùå Error adding contact');\n    }\n    process.exit(1);\n  }\n}\n\nasync function cmdListContacts(options: any): Promise<void> {\n  try {\n    const client = new DaemonClient(options.host, options.port);\n    const result = await client.get('/contacts');\n\n    const contacts = result.contacts || [];\n\n    console.log(`\\nüìã Contacts (${contacts.length}):`);\n    console.log('-'.repeat(60));\n\n    for (const contact of contacts) {\n      console.log(`\\n  ${contact.name}`);\n      console.log(`    DID: ${contact.did}`);\n      console.log(`    Added: ${contact.addedAt || 'Unknown'}`);\n      if (contact.notes) {\n        console.log(`    Notes: ${contact.notes}`);\n      }\n    }\n\n    console.log();\n  } catch (error) {\n    if (axios.isAxiosError(error) && error.code === 'ECONNREFUSED') {\n      console.log('‚ùå Cannot connect to daemon');\n    } else {\n      console.log('‚ùå Error listing contacts');\n    }\n    process.exit(1);\n  }\n}\n\nasync function cmdListMessages(options: any): Promise<void> {\n  try {\n    const client = new DaemonClient(options.host, options.port);\n    const result = await client.get('/messages', { limit: options.limit, from: options.sender });\n\n    let messages = result.messages || [];\n\n    console.log(`\\nüì¨ Recent Messages (${messages.length}):`);\n    console.log('-'.repeat(60));\n\n    for (const msg of messages) {\n      const sender = msg.from?.slice(0, 48) || 'Unknown';\n      const content = msg.content?.trim() || '';\n      const timestamp = msg.timestamp ? msg.timestamp.slice(0, 19) : '';\n\n      const isTruncated = (msg.content || '').length > 50;\n      const ellipsis = isTruncated ? '...' : '';\n\n      console.log(`\\n  [${timestamp}] ${sender}...`);\n      console.log(`  ${content.slice(0, 50)}${ellipsis}`);\n      if (isTruncated) {\n        console.log(`  (trimmed, full: ${(msg.content || '').length} chars)`);\n      }\n    }\n\n    console.log();\n  } catch (error) {\n    if (axios.isAxiosError(error) && error.code === 'ECONNREFUSED') {\n      console.log('‚ùå Cannot connect to daemon');\n    } else {\n      console.log('‚ùå Error listing messages');\n    }\n    process.exit(1);\n  }\n}\n\nasync function cmdGetDID(options: any): Promise<void> {\n  try {\n    const client = new DaemonClient(options.host, options.port);\n    const status = await client.get('/status');\n\n    console.log(status.did);\n  } catch (error) {\n    if (axios.isAxiosError(error) && error.code === 'ECONNREFUSED') {\n      console.log('‚ùå Cannot connect to daemon');\n    } else {\n      console.log('‚ùå Error getting DID');\n    }\n    process.exit(1);\n  }\n}\n\nasync function cmdRegister(options: any): Promise<void> {\n  try {\n    const client = new DaemonClient(options.host, options.port);\n\n    // Validate username format\n    const username = options.username;\n    const usernameRegex = /^@[a-zA-Z0-9_]{2,19}$/;\n    if (!usernameRegex.test(username)) {\n      console.log('‚ùå Invalid username format');\n      console.log('   Must start with @');\n      console.log('   3-20 characters (including @)');\n      console.log('   Alphanumeric + underscore only');\n      console.log('   Example: @thal, @alice_123');\n      process.exit(1);\n    }\n\n    const data: any = {\n      username,\n      description: options.description || '',\n      purpose: options.purpose || '',\n      tags: options.tags || [],\n    };\n\n    const result = await client.post('/register', data);\n\n    if (result) {\n      console.log(`‚úÖ ${result.message || 'Registered'}`);\n      console.log(`   Username: ${result.username}`);\n      console.log(`   DID: ${(result.did || '').slice(0, 32)}...`);\n      if (options.description) {\n        console.log(`   Description: ${options.description}`);\n      }\n      if (options.purpose) {\n        console.log(`   Purpose: ${options.purpose}`);\n      }\n      if (options.tags && options.tags.length > 0) {\n        console.log(`   Tags: ${options.tags.join(', ')}`);\n      }\n    }\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      if (error.code === 'ECONNREFUSED') {\n        console.log('‚ùå Cannot connect to daemon');\n      } else if (error.response?.status === 409) {\n        console.log(`‚ùå ${error.response.data.detail || 'Username already taken'}`);\n      } else {\n        console.log(`‚ùå Error: ${error.message}`);\n      }\n    } else {\n      console.log('‚ùå Error registering');\n    }\n    process.exit(1);\n  }\n}\n\nasync function cmdDiscover(options: any): Promise<void> {\n  try {\n    const client = new DaemonClient(options.host, options.port);\n\n    const params: any = {};\n    if (options.search) {\n      params.search = options.search;\n    }\n\n    const result = await client.get('/directory', params);\n\n    if (options.format === 'json') {\n      console.log(JSON.stringify(result, null, 2));\n      return;\n    }\n\n    // Text format\n    if (result && result.agents) {\n      const agents = result.agents;\n      const count = result.count || agents.length;\n\n      console.log(`üìñ Agent Directory (${count} agent${count !== 1 ? 's' : ''}):`);\n      console.log('='.repeat(60));\n\n      if (!agents || agents.length === 0) {\n        console.log('No agents found.');\n        if (options.search) {\n          console.log('\\nüí° Try a different search term');\n        } else {\n          console.log(\n            '\\nüí° Be the first to register: agentctl register @username --description \"AI agent\" --purpose \"Collaborate on projects\"'\n          );\n        }\n      } else {\n        for (const agent of agents) {\n          const username = agent.username || 'Unknown';\n          const description = agent.description || '';\n          const purpose = agent.purpose || '';\n          const tags = agent.tags || [];\n          const registered = agent.registeredAt || '';\n\n          console.log(`\\n  ü§ñ ${username}`);\n          if (description) {\n            console.log(`     üìù ${description}`);\n          }\n          if (purpose) {\n            console.log(`     üéØ ${purpose}`);\n          }\n          if (tags && tags.length > 0) {\n            console.log(`     üè∑Ô∏è  ${tags.join(', ')}`);\n          }\n          console.log(`     üìÖ Registered: ${registered.slice(0, 10) || 'N/A'}`);\n        }\n      }\n      console.log();\n    } else {\n      console.log('‚ùå Failed to query directory');\n    }\n  } catch (error) {\n    if (axios.isAxiosError(error) && error.code === 'ECONNREFUSED') {\n      console.log('‚ùå Cannot connect to daemon');\n    } else {\n      console.log('‚ùå Error discovering agents');\n    }\n    process.exit(1);\n  }\n}\n\nasync function cmdShareDID(options: any): Promise<void> {\n  try {\n    const client = new DaemonClient(options.host, options.port);\n    const status = await client.get('/status');\n\n    const did = status.did;\n\n    console.log(`üì± Share your DID:`);\n    console.log(`${'='.repeat(60)}`);\n    console.log(`\\n  DID: ${did}`);\n    console.log(`\\n  Agent-Messenger Link:`);\n    console.log(`  agent-messenger://${did}`);\n    console.log(`\\n  QR Code (copy-paste this):`);\n    console.log(`  ${did}`);\n    console.log(`\\n  To add this contact:`);\n    console.log(`  agentctl add-contact ${did} \"Your Name\"`);\n    console.log(`${'='.repeat(60)}\\n`);\n  } catch (error) {\n    if (axios.isAxiosError(error) && error.code === 'ECONNREFUSED') {\n      console.log('‚ùå Cannot connect to daemon');\n    } else {\n      console.log('‚ùå Error sharing DID');\n    }\n    process.exit(1);\n  }\n}\n\nasync function cmdStartDaemon(options: any): Promise<void> {\n  const { spawn } = require('child_process');\n  const path = require('path');\n\n  const args = ['start-daemon', '--relay', options.relay];\n\n  if (options.profile) {\n    args.push('--profile', options.profile);\n  }\n\n  if (options.dataDir) {\n    args.push('--data-dir', options.dataDir);\n  }\n\n  if (options.port) {\n    args.push('--port', options.port.toString());\n  }\n\n  console.log('[agentctl] Starting daemon...');\n  console.log(`[agentctl] Command: agentctl ${args.join(' ')}`);\n\n  const child = spawn(process.execPath, [path.join(__dirname, '../dist/cli.js'), ...args], {\n    detached: true,\n    stdio: 'ignore',\n  });\n\n  child.unref();\n\n  console.log('[agentctl] ‚úÖ Daemon started');\n  console.log('[agentctl] Wait a few seconds for it to initialize');\n}\n\nasync function cmdStopDaemon(options: any): Promise<void> {\n  console.log('[agentctl] To stop the daemon, find the process and kill it:');\n  console.log('[agentctl]   Linux/macOS: pkill -f \"agent-messenger\"');\n  console.log('[agentctl]   Windows: taskkill /F /IM node.exe');\n  console.log('[agentctl] Or press Ctrl+C in the daemon terminal');\n}\n\n// Main program\nconst program = new Command();\n\nprogram\n  .name('agentctl')\n  .description('Agent Messenger Client v3.0')\n  .version('3.0.0')\n  .option('--host <host>', 'Daemon API host', DEFAULT_API_HOST)\n  .option('--port <port>', 'Daemon API port', String(DEFAULT_API_PORT));\n\nprogram\n  .command('status')\n  .description('Show daemon status')\n  .action(cmdStatus);\n\nprogram\n  .command('send')\n  .description('Send a message')\n  .option('--to <did>', 'Recipient DID')\n  .option('--to-name <name>', 'Recipient contact name')\n  .argument('<message>', 'Message content')\n  .action(cmdSend);\n\nprogram\n  .command('add-contact')\n  .description('Add a contact')\n  .argument('<did>', 'Contact DID')\n  .argument('<name>', 'Contact name')\n  .option('--notes <notes>', 'Optional notes')\n  .action(cmdAddContact);\n\nprogram\n  .command('list-contacts')\n  .description('List all contacts')\n  .action(cmdListContacts);\n\nprogram\n  .command('list-messages')\n  .description('List recent messages')\n  .option('--limit <n>', 'Max messages to show', '50')\n  .option('--sender <sender>', 'Filter by sender (e.g., @user)')\n  .action(cmdListMessages);\n\nprogram\n  .command('get-did')\n  .description('Get and display DID')\n  .action(cmdGetDID);\n\nprogram\n  .command('register')\n  .description('Register username in directory')\n  .argument('<username>', 'Username (e.g., @thal)')\n  .option('--description <desc>', 'What you do')\n  .option('--purpose <purpose>', 'Why to contact you')\n  .option('--tags <tags...>', 'Tags (e.g., --tags ai coding)')\n  .action(cmdRegister);\n\nprogram\n  .command('discover')\n  .description('Discover other agents')\n  .option('--search <term>', 'Search term for filtering')\n  .option('--format <format>', 'Output format', 'text')\n  .action(cmdDiscover);\n\nprogram\n  .command('share-did')\n  .description('Generate shareable DID link')\n  .action(cmdShareDID);\n\nprogram\n  .command('start-daemon')\n  .description('Start the daemon')\n  .requiredOption('--relay <url>', 'Relay WebSocket URL')\n  .option('--profile <name>', 'Profile name')\n  .option('--data-dir <dir>', 'Data directory')\n  .option('--port <port>', 'API port')\n  .action(cmdStartDaemon);\n\nprogram\n  .command('stop-daemon')\n  .description('Stop the daemon')\n  .action(cmdStopDaemon);\n\nprogram.parse();\n"],"mappings":"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","names":[]}